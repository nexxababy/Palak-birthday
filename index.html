<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>HBD Love</title>

<link rel="stylesheet" href="file/default.css" />
<script src="file/jquery.min.js"></script>
<script src="file/jscex.min.js"></script>
<script src="file/jscex-parser.js"></script>
<script src="file/jscex-jit.js"></script>
<script src="file/jscex-builderbase.min.js"></script>
<script src="file/jscex-async.min.js"></script>
<script src="file/jscex-async-powerpack.min.js"></script>
<script src="file/function.js"></script>
<script src="file/love.js"></script>

<style>
body {
    margin: 0;
    background: url("bg.jpg") no-repeat center center fixed;
    background-size: cover;
}
canvas {
    display: block;
    margin: auto;
}
</style>
</head>

<body>

<audio autoplay loop>
    <source src="aud.mp3" type="audio/mp3">
</audio>

<div id="wrap">
    <div id="text">
        <div id="code">
            <span class="say">Hey you ðŸ’ž</span><br>
            <span class="say">Happy Birthday ðŸŽ‚</span><br>
            <span class="say">May God bless you ðŸ’«</span><br>
            <span class="say">Stay happy always ðŸ’•</span><br>
        </div>
    </div>

    <canvas id="canvas" width="1100" height="680"></canvas>
</div>

<script>
(function () {

    var canvas = $('#canvas');
    var width = canvas.width();
    var height = canvas.height();

    var leafColors = [
        "rgb(190,26,37)",   // red
        "rgb(170,80,255)"   // purple
    ];
    var colorIndex = 0;

    // BLINKING COLOR CHANGE
    setInterval(function () {
        colorIndex = (colorIndex + 1) % leafColors.length;
        tree.opts.seed.color = leafColors[colorIndex];
    }, 700);

    var opts = {
        seed: {
            x: width / 2 - 220,   // ðŸ”¥ CENTER â†’ LEFT SHIFT
            color: leafColors[0],
            scale: 2
        },
        branch: [
            [535, 680, 570, 250, 500, 200, 30, 100, [
                [540, 500, 455, 417, 340, 400, 13, 100],
                [550, 445, 600, 356, 680, 345, 12, 100]
            ]]
        ],
        bloom: {
            num: 700,
            width: 1080,
            height: 650
        }
    };

    var tree = new Tree(canvas[0], width, height, opts);
    var seed = tree.seed;

    var seedAnimate = eval(Jscex.compile("async", function () {
        seed.draw();
        while (seed.canScale()) {
            seed.scale(0.95);
            $await(Jscex.Async.sleep(10));
        }
        while (seed.canMove()) {
            seed.move(0, 2);
            $await(Jscex.Async.sleep(10));
        }
    }));

    var growAnimate = eval(Jscex.compile("async", function () {
        while (tree.canGrow()) {
            tree.grow();
            $await(Jscex.Async.sleep(10));
        }
    }));

    var flowAnimate = eval(Jscex.compile("async", function () {
        while (tree.canFlower()) {
            tree.flower(2);
            $await(Jscex.Async.sleep(10));
        }
    }));

    var textAnimate = eval(Jscex.compile("async", function () {
        $("#code").show().typewriter();
    }));

    var runAsync = eval(Jscex.compile("async", function () {
        $await(seedAnimate());
        $await(growAnimate());
        $await(flowAnimate());
        $await(textAnimate());
    }));

    runAsync().start();
})();
</script>

</body>
</html>

